{% extends 'base.html.twig' %}
{% block body %}

    <link href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/css/bootstrap.css" rel="stylesheet"/>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-datepicker/1.6.4/css/bootstrap-datepicker3.css" rel="stylesheet"/>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/2.1.3/jquery.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-datepicker/1.6.4/js/bootstrap-datepicker.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-datepicker/1.6.4/locales/bootstrap-datepicker.de.min.js"></script>

    <script src="https://unpkg.com/axios/dist/axios.min.js"></script>

    <div id="datepicker"></div>
    <input type="hidden"  id="my_hidden_input">

    <div id="pickyDate"></div>
    <div>

    </div>

    <div id="getRendez-vous">
    <h1 id="showDate"></h1>
    </div>

    <div id = "myDiv"></div>


    <script>

        $("#getRendez-vous").hide();

        $('#datepicker').datepicker({
            format: "dd.mm.yyyy",
            todayBtn: "linked",
            language: "fr",
            todayHighlight: true,
        }).on('changeDate', getTodayDate);

        function getTodayDate(){
            var value = $('#datepicker').datepicker('getFormattedDate');
            $("#showDate").text(value);
            $("#getRendez-vous").show();


            $.ajax({
                url: '/heure',
                type: "GET",
                dataType: "json",
                async: true,
                success: function (data) {

                    var myDiv = document.getElementById("myDiv");

                    for (let i =0; i< data.length; i++) {

                        var checkbox = document.createElement('input');

                        checkbox.type = "checkbox";
                        checkbox.name =  data[i]['heure'];
                        checkbox.value = data[i]['heure'];
                        checkbox.id = "id";

                        var label = document.createElement('label');

                        label.htmlFor = "id";

                        label.appendChild(document.createTextNode(data[i]['heure']));

                        myDiv.appendChild(checkbox);
                        myDiv.appendChild(label);

                    }





                }

            });







        }


    </script>
{% endblock %}